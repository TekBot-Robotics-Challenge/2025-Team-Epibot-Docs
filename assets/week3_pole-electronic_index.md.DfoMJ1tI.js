import{_ as a,c as n,o as s,ag as i}from"./chunks/framework.C_7JoTpM.js";const h=JSON.parse('{"title":"TEST OUTPUT: Documentation","description":"","frontmatter":{},"headers":[],"relativePath":"week3/pole-electronic/index.md","filePath":"week3/pole-electronic/index.md"}'),t={name:"week3/pole-electronic/index.md"};function r(o,e,l,p,c,d){return s(),n("div",null,e[0]||(e[0]=[i(`<h1 id="test-output-documentation" tabindex="-1">TEST OUTPUT: Documentation <a class="header-anchor" href="#test-output-documentation" aria-label="Permalink to &quot;TEST OUTPUT: Documentation&quot;">​</a></h1><p>In this documentation:</p><ul><li><a href="#1-general-context">1. General Context</a></li><li><a href="#2-description-of-components">2. Description of components</a></li><li><a href="#3-computer-aided-design">3. Computer-Aided Design</a></li><li><a href="#4-7-segment-display-logic">4. 7-Segment Display Logic</a></li><li><a href="#5-the-arduino-code">5. The Arduino Code</a></li><li><a href="#6-assembly-of-components">6. Assembly of components</a></li><li><a href="#7-testing-the-project">7. Testing the project</a></li><li><a href="#8-helpful-ressources">8. Helpful Ressources</a></li></ul><h2 id="_1-general-context" tabindex="-1">1. General Context <a class="header-anchor" href="#_1-general-context" aria-label="Permalink to &quot;1. General Context&quot;">​</a></h2><p>This test introduces us to a fun and innovative way to make a <strong>7-segment display</strong> using <strong>servo motors</strong> instead of lights (LEDs). Each segment (the bars that make up each digit) is moved by a small servo motor. The display shows the numbers from 0 to 9, then from 9 to 0, changing every second.</p><h2 id="_2-description-of-components" tabindex="-1">2. Description of components <a class="header-anchor" href="#_2-description-of-components" aria-label="Permalink to &quot;2. Description of components&quot;">​</a></h2><h3 id="a-the-atmega328p-microcontroller" tabindex="-1">a. The ATmega328P microcontroller <a class="header-anchor" href="#a-the-atmega328p-microcontroller" aria-label="Permalink to &quot;a. The ATmega328P microcontroller&quot;">​</a></h3><p>The <a href="https://ww1.microchip.com/downloads/aemDocuments/documents/MCU08/ProductDocuments/DataSheets/ATmega48A-PA-88A-PA-168A-PA-328-P-DS-DS40002061B.pdf" target="_blank" rel="noreferrer">ATmega328P</a> is an 8-bit <a href="https://www.geeksforgeeks.org/digital-logic/microcontroller-and-its-types/" target="_blank" rel="noreferrer">microcontroller</a> chip that serves as the <strong>central processing unit</strong> in many electronic devices. It is based on the <a href="https://en.wikipedia.org/wiki/AVR_microcontrollers" target="_blank" rel="noreferrer">AVR architecture</a> and is designed for tasks that involve reading sensor data, controlling outputs like LEDs or motors, and communicating or exchanging information with other devices. It is the chip used in the popular <a href="https://docs.arduino.cc/hardware/uno-rev3/" target="_blank" rel="noreferrer">Arduino UNO board</a>.</p><p align="center"><img src="https://github.com/user-attachments/assets/403a51b1-f52f-4d34-8fca-dbdd6fee4f12" width="500"></p><h4 id="key-features" tabindex="-1">KEY FEATURES <a class="header-anchor" href="#key-features" aria-label="Permalink to &quot;KEY FEATURES&quot;">​</a></h4><ul><li><strong>CPU:</strong> 8-bit AVR architecture running at up to 20 MHz (handles calculations and instructions quickly and efficiently)</li><li><strong>Memory:</strong> Flash Memory (32 KB), SRAM (2 KB), EEPROM (1 KB) for data and main program storing</li><li><strong>GPIO Pins:</strong> 23 programmable input/output pins for reading signals</li><li><strong>Timers:</strong> Three built-in timers (two 8-bit, one 16-bit)</li><li><strong>Analog Inputs:</strong> 6 pins for reading changing electrical signals</li><li><strong>Communication interfaces:</strong> Supports USART (serial comminication), I2C and SPI protocols</li><li><strong>PWM:</strong> 6 channels for Pulse Width Modulation</li><li><strong>Operating Voltage:</strong> Works with power supplies from 1.8V to 5.5V</li><li><strong>Low Power Modes:</strong> Multiple sleep modes for energy efficiency</li></ul><h3 id="b-a-servomotor" tabindex="-1">b. A servomotor <a class="header-anchor" href="#b-a-servomotor" aria-label="Permalink to &quot;b. A servomotor&quot;">​</a></h3><p>A <a href="https://en.wikipedia.org/wiki/Servomotor" target="_blank" rel="noreferrer">servomotor</a> is a small device used to precisely control the position of objects, commonly found in robotics, model airplanes, and remote-controlled cars. It consists of a motor, a position sensor, and a control circuit, allowing it to rotate or move to a specific angle when given an electronic signal. Servo motors are popular in projects that require accurate and repeatable movements, such as animating displays or actuating robotic arms.</p><p align="center"><img src="https://github.com/user-attachments/assets/4577bfe3-11f7-4e74-b1ea-8e482174593a" width="500"></p><h3 id="c-the-pca-9685-servomotor-controller" tabindex="-1">c. The PCA-9685: servomotor controller <a class="header-anchor" href="#c-the-pca-9685-servomotor-controller" aria-label="Permalink to &quot;c. The PCA-9685: servomotor controller&quot;">​</a></h3><p>The <a href="https://cdn-shop.adafruit.com/datasheets/PCA9685.pdf" target="_blank" rel="noreferrer">PCA-9685</a> is an integrated circuit (IC) used as a 16-channel <a href="https://en.wikipedia.org/wiki/Pulse-width_modulation" target="_blank" rel="noreferrer">Pulse Width Modulation</a> (PWM) driver, often controlled via the I2C communication protocol. It allows you to control up to sixteen servos or LEDs independently from just two microcontroller pins. The PCA9685 is widely used in robotics and automation projects to expand the number of devices you can control, especially useful when you need to manage many servos or LEDs at the same time.</p><p align="center"><img src="https://github.com/user-attachments/assets/a77edaf7-42a2-4912-9f70-08218d011634" width="500"></p><h3 id="d-the-zener-diode" tabindex="-1">d. The Zener Diode <a class="header-anchor" href="#d-the-zener-diode" aria-label="Permalink to &quot;d. The Zener Diode&quot;">​</a></h3><p>The <a href="https://en.wikipedia.org/wiki/Zener_diode" target="_blank" rel="noreferrer">Zener Diode</a> is a special type of semiconductor diode that is designed to allow current to flow in the reverse direction when the voltage across it reaches a specific value, called the Zener breakdown voltage. What this means is that a Zener diode can maintain a constant voltage in a circuit, even if the input voltage changes. When the voltage across the Zener diode exceeds its breakdown voltage, it starts conducting in reverse and keeps the voltage steady, making it very useful for voltage regulation and protecting sensitive electronic components from voltage spikes.</p><p align="center"><img src="https://github.com/user-attachments/assets/ff801b0f-7cb2-41a0-b1c1-73a898b3c432" width="500"></p><h3 id="e-the-lm-7908-a-voltage-regulator" tabindex="-1">e. The LM-7908: a voltage regulator <a class="header-anchor" href="#e-the-lm-7908-a-voltage-regulator" aria-label="Permalink to &quot;e. The LM-7908: a voltage regulator&quot;">​</a></h3><p>The <a href="https://www.alldatasheet.com/datasheet-pdf/view/125278/NSC/LM1950.html" target="_blank" rel="noreferrer">LM-7908</a> is a <a href="https://en.wikipedia.org/wiki/Voltage_regulator" target="_blank" rel="noreferrer">voltage regulator</a>. Its purpose to keep the voltage at a constant level. It uses a negative feedback system to monitor and adjust the output, ensuring stable voltage even when the input voltage or load conditions change.</p><p align="center"><img src="https://github.com/user-attachments/assets/20bb4d2a-3de9-4176-aa23-6ea9f7a78bbe" width="500"></p><h3 id="f-a-16mhz-quartz-crystal" tabindex="-1">f. A 16Mhz Quartz Crystal <a class="header-anchor" href="#f-a-16mhz-quartz-crystal" aria-label="Permalink to &quot;f. A 16Mhz Quartz Crystal&quot;">​</a></h3><p>A 16MHz <a href="https://en.wikipedia.org/wiki/Crystal_oscillator" target="_blank" rel="noreferrer">quartz crystal</a> is an electronic component used to provide a precise clock signal for microcontrollers and other digital circuits. By vibrating at a stable frequency of 16,000,000 cycles per second, it ensures accurate timing for operations such as processing instructions and generating communication signals.</p><p align="center"><img src="https://github.com/user-attachments/assets/6bd9e058-17b3-477a-9b86-afcf6be05a07" width="500"></p><h3 id="g-our-custom-power-supply" tabindex="-1">g. Our custom power supply <a class="header-anchor" href="#g-our-custom-power-supply" aria-label="Permalink to &quot;g. Our custom power supply&quot;">​</a></h3><p>To power up our setup, we should build a power supply that will provide safe and sufficient voltage to all the components. For that, we will use:</p><ul><li>3.7V lithium batteries</li><li>a zener diode for 5V logic regulation</li><li>a LM-7908 tension regulator to bring the voltage to 9V</li><li>22 uF and 5V/9V capacitors</li></ul><h2 id="_3-computer-aided-design" tabindex="-1">3. Computer-Aided Design <a class="header-anchor" href="#_3-computer-aided-design" aria-label="Permalink to &quot;3. Computer-Aided Design&quot;">​</a></h2><p>We used the KiCad EDA (<em>download <a href="https://www.kicad.org/" target="_blank" rel="noreferrer">here</a></em>) to design the schematic as well as the PCB for this project. Find its official documentation <a href="https://docs.kicad.org/" target="_blank" rel="noreferrer">here</a>.</p><p>To design the individual segments and model the housing that encloses all the circuitry, we used Solidworks (<em>download <a href="https://www.solidworks.com/sw/support/downloads.htm" target="_blank" rel="noreferrer">here</a></em>). Learn more about this software <a href="https://help.solidworks.com/" target="_blank" rel="noreferrer">here</a>.</p><h3 id="a-kicad-schematic-diagram" tabindex="-1">a. KiCad schematic diagram <a class="header-anchor" href="#a-kicad-schematic-diagram" aria-label="Permalink to &quot;a. KiCad schematic diagram&quot;">​</a></h3><p>The schematic is divided into two main blocks:</p><ol><li><strong>Custom Arduino-compatible microcontroller circuit</strong></li></ol><ul><li>The ATmega328P is powered by a regulated 5V supply, generated via: <ul><li>The LM-7809 which receives an external 14.8V and outputs 9V</li><li>The Zener diode which stabilizes voltage down to 5V for logic</li></ul></li><li>Two voltage outputs: <ul><li>9V (red LED monitored)</li><li>5V (green LED monitored)</li></ul></li><li>16 MHz quartz for clock, 22 µF capacitors for stability</li><li>A button for manual reset</li></ul><ol start="2"><li><strong>PCA-9685 PWM driver with the 7 servos</strong></li></ol><ul><li>The PCA-9685 generates PWM for the 7 servos</li><li>Connections: <ul><li>GND: system ground</li><li>VCC: 5V logic supply</li><li>V++: 9V servo supply</li><li>SDA: connected to ATmega328P A4</li><li>SCL: connected to ATmega328P A5</li></ul></li><li>Servos: PWM signal from PCA9685, powered via V++ (9V) and GND</li></ul><p><img src="https://github.com/user-attachments/assets/465c3744-cb84-4d03-b9ab-aaabe32dcd35" alt="The Schematic"></p><h3 id="b-printed-circuit-board-pcb-design" tabindex="-1">b. Printed Circuit Board (PCB) design <a class="header-anchor" href="#b-printed-circuit-board-pcb-design" aria-label="Permalink to &quot;b. Printed Circuit Board (PCB) design&quot;">​</a></h3><ul><li>PCB overview in the KiCad PCB editor</li></ul><p align="center"><img src="https://github.com/user-attachments/assets/ccb6f15d-f534-4f7a-a610-9e45856a440b" width="1000"></p><p><em>You can download the full KiCad project <a href="https://github.com/TekBot-Robotics-Challenge/2025-Team-Epibot-Docs/raw/refs/heads/main/docs/week3/pole-electronic/designs/servo_display_kicad.zip" target="_blank" rel="noreferrer">here</a></em>.</p><h2 id="_4-7-segment-servo-display-logic" tabindex="-1">4. 7-Segment Servo Display Logic <a class="header-anchor" href="#_4-7-segment-servo-display-logic" aria-label="Permalink to &quot;4. 7-Segment Servo Display Logic&quot;">​</a></h2><p>A 7-segment servo display consists of seven individual segments labeled from <strong>A</strong> through <strong>G</strong> (<em>held each by a servo</em>), arranged to form the numbers 0 through 9 by selectively rising or laying down specific segments.</p><p>The logic for controlling a 7-segment servo display is typically summarized in a truth table, where each digit from 0 to 9 corresponds to a unique combination of segments that should be activated. For example, to display the digit &#39;8&#39;, all seven segments are <strong>turned on</strong>, while to display <strong>&#39;1&#39;</strong>, only segments <strong>&#39;b&#39;</strong> and <strong>&#39;c&#39;</strong> are activated.</p><p>Below is a segment code table for digits from 0 to 9:</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>| Digit | A | B | C | D | E | F | G |</span></span>
<span class="line"><span>|-------|---|---|---|---|---|---|---|</span></span>
<span class="line"><span>|   0   | 1 | 1 | 1 | 1 | 1 | 1 | 0 |</span></span>
<span class="line"><span>|   1   | 0 | 1 | 1 | 0 | 0 | 0 | 0 |</span></span>
<span class="line"><span>|   2   | 1 | 1 | 0 | 1 | 1 | 0 | 1 |</span></span>
<span class="line"><span>|   3   | 1 | 1 | 1 | 1 | 0 | 0 | 1 |</span></span>
<span class="line"><span>|   4   | 0 | 1 | 1 | 0 | 0 | 1 | 1 |</span></span>
<span class="line"><span>|   5   | 1 | 0 | 1 | 1 | 0 | 1 | 1 |</span></span>
<span class="line"><span>|   6   | 1 | 0 | 1 | 1 | 1 | 1 | 1 |</span></span>
<span class="line"><span>|   7   | 1 | 1 | 1 | 0 | 0 | 0 | 0 |</span></span>
<span class="line"><span>|   8   | 1 | 1 | 1 | 1 | 1 | 1 | 1 |</span></span>
<span class="line"><span>|   9   | 1 | 1 | 1 | 1 | 0 | 1 | 1 |</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>In this project, a logical &#39;1&#39; means the servo should move to reveal the segment, and a &#39;0&#39; means it should hide the segment.</p><h2 id="_5-the-arduino-code" tabindex="-1">5. The Arduino Code <a class="header-anchor" href="#_5-the-arduino-code" aria-label="Permalink to &quot;5. The Arduino Code&quot;">​</a></h2><h3 id="setting-up" tabindex="-1">Setting up <a class="header-anchor" href="#setting-up" aria-label="Permalink to &quot;Setting up&quot;">​</a></h3><p>Download the Arduino IDE using this <a href="https://www.arduino.cc/" target="_blank" rel="noreferrer">link</a>. It&#39;s a software that will allow you to run and upload your code to the MCUs. Once the installation is done, we can set up by installing the necessary libraries via the <strong>Library Manager</strong> in the Arduino IDE (<em>make sure that you also install their dependencies when prompted to</em>). We will need the following Arduino libraries:</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>/* ========= REQUIRED LIBRAIRIES ============== */</span></span>
<span class="line"><span>#include &lt;Wire.h&gt;</span><span>                     // Enables I2C communication</span></span>
<span class="line"><span>#include &lt;Adafruit_PWMServoDriver.h&gt;</span><span>  // Control the PCA-9685</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="global-variables-and-constants-declarations" tabindex="-1">Global variables and constants declarations <a class="header-anchor" href="#global-variables-and-constants-declarations" aria-label="Permalink to &quot;Global variables and constants declarations&quot;">​</a></h3><ul><li><p>Creating a PWM controller for the PCA-9685 board: <code>Adafruit_PWMServoDriver pwm = Adafruit_PWMServoDriver();</code></p></li><li><p>Constants for minimum and maximum pulse width values used to control the position of a servomotor.</p></li></ul><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>#define pulseMin 125</span><span> // 0 degree pulse</span></span>
<span class="line"><span>#define pulseMax 625</span><span> // 180 degrees pulse</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li><p>Number of servos: <code>#define numberOfServos 7</code></p></li><li><p>The segment code table, as shown above, will be implemented in code as an array of booleans, where each digit corresponds to a specific combination of servo positions (<em>0 or false for OFF, 1 or true for ON</em>).</p></li></ul><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>const bool digitPositions[10][7] =</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>  {1, 1, 1, 1, 1, 1, 0}, // digit 0</span></span>
<span class="line"><span>  {0, 1, 1, 0, 0, 0, 0}, // digit 1</span></span>
<span class="line"><span>  {1, 1, 0, 1, 1, 0, 1}, // digit 2</span></span>
<span class="line"><span>  {1, 1, 1, 1, 0, 0, 1}, // digit 3</span></span>
<span class="line"><span>  {0, 1, 1, 0, 0, 1, 1}, // digit 4</span></span>
<span class="line"><span>  {1, 0, 1, 1, 0, 1, 1}, // digit 5</span></span>
<span class="line"><span>  {1, 0, 1, 1, 1, 1, 1}, // digit 6</span></span>
<span class="line"><span>  {1, 1, 1, 0, 0, 0, 0}, // digit 7</span></span>
<span class="line"><span>  {1, 1, 1, 1, 1, 1, 1}, // digit 8</span></span>
<span class="line"><span>  {1, 1, 1, 1, 0, 1, 1}, // digit 9</span></span>
<span class="line"><span>};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><ul><li>Variables for non-blocking delay handling using <code>millis()</code>:</li></ul><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>unsigned long previousMillis = 0;</span></span>
<span class="line"><span>const long interval = 1000; // Interval of 1 second</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>Constants for ON/OFF servo positions</li></ul><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>#define UP 90</span><span> // segment up position angle (active state)</span></span>
<span class="line"><span>#define FLAT 180</span><span> // segment flat position angle (non-active state)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>Global variable to track current digit: <code>unsigned int currentDigit = 0;</code></li></ul><h3 id="setup-function" tabindex="-1">setup() function <a class="header-anchor" href="#setup-function" aria-label="Permalink to &quot;setup() function&quot;">​</a></h3><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>void setup()</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>  Serial.begin(115200); // Start the serial monitor at 115200 bauds</span></span>
<span class="line"><span>  pwm.begin(); // Start the PWM controller</span></span>
<span class="line"><span>  pwm.setPWMFreq(60); // Set servo frequency at 60 Hz</span></span>
<span class="line"><span>  // put all servo in non-active mode at the start</span></span>
<span class="line"><span>  const bool startPos[7] = {0, 0, 0, 0, 0, 0, 0};</span></span>
<span class="line"><span>  displayDigit(startPos);</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="custom-functions" tabindex="-1">Custom functions <a class="header-anchor" href="#custom-functions" aria-label="Permalink to &quot;Custom functions&quot;">​</a></h3><ul><li>Function to move a servomotor to the desired angle</li></ul><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>void moveServo(int servoNumber, int angle)</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>  int pulse = map(angle, UP, FLAT, pulseMin, pulseMax); // convert angle to pulse</span></span>
<span class="line"><span>  pwm.setPWM(servoNumber, 0, pulse); // apply pulse to servo</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>Function for displaying digits based on the segment code table</li></ul><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>void displayDigit(const bool array[7])</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>  for (int i = 0; i &lt; numberOfServos; i++)</span></span>
<span class="line"><span>  {</span></span>
<span class="line"><span>    if (array[i])</span></span>
<span class="line"><span>      moveServo(i, UP); // move segment up</span></span>
<span class="line"><span>    else</span></span>
<span class="line"><span>      moveServo(i, FLAT); // lay segment flat</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="loop-function" tabindex="-1">loop() function <a class="header-anchor" href="#loop-function" aria-label="Permalink to &quot;loop() function&quot;">​</a></h3><ul><li>Variables:</li></ul><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>unsigned long currentMillis = millis(); // Get elapsed time</span></span>
<span class="line"><span>// control digit order: if false, go from 0 to 9, else, go from 9 to 0</span></span>
<span class="line"><span>static bool rewind = false; // display</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>Digit displaying logic</li></ul><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>  if (currentMillis - previousMillis &gt;= interval) // ensure 1 second delay</span></span>
<span class="line"><span>  {</span></span>
<span class="line"><span>    previousMillis = currentMillis; // Save current time</span></span>
<span class="line"><span>    // print to the serial monitor for debugging</span></span>
<span class="line"><span>    Serial.print(&quot;===&quot;); Serial.print(currentDigit); Serial.println(&quot;===&quot;);</span></span>
<span class="line"><span>    // display the current digit</span></span>
<span class="line"><span>    displayDigit(digitPositions[currentDigit]);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    if (currentDigit &gt;= 9)</span></span>
<span class="line"><span>      rewind = true; // start counting backwards</span></span>
<span class="line"><span>    if (!rewind)</span></span>
<span class="line"><span>      currentDigit++;</span></span>
<span class="line"><span>    if (rewind &amp;&amp; currentDigit &gt; 0)</span></span>
<span class="line"><span>      currentDigit--;</span></span>
<span class="line"><span>    if (rewind &amp;&amp; !currentDigit)</span></span>
<span class="line"><span>      rewind = false; // start counting from zero again</span></span>
<span class="line"><span>  }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p><em>The full code is available to download <a href="https://raw.githubusercontent.com/TekBot-Robotics-Challenge/2025-Team-Epibot-Docs/refs/heads/main/docs/week3/pole-electronic/code/servo_displayer.ino" target="_blank" rel="noreferrer">here</a></em>.</p><h2 id="_6-assembly-of-components" tabindex="-1">6. Assembly of components <a class="header-anchor" href="#_6-assembly-of-components" aria-label="Permalink to &quot;6. Assembly of components&quot;">​</a></h2><p>The assembly process was carried out on a veroboard instead of a custom PCB, allowing for easy and flexible adjustments during construction.</p><h3 id="component-placement" tabindex="-1">Component Placement <a class="header-anchor" href="#component-placement" aria-label="Permalink to &quot;Component Placement&quot;">​</a></h3><p>We start by planning where each component will go on the veroboard. We then place the ATmega328P microcontroller, PCA9685 PWM module, voltage regulator (LM7809 or LM-1950), zener diode, capacitors, and LEDs in order to minimize wire crossings and make the layout neat and logical. Finally, we insert the header pins for easy connection of servomotors and for accessing the microcontroller’s I/O pins for testing or expansion.</p><p align="center"><img src="https://github.com/user-attachments/assets/8b286820-e45b-4a66-9b73-79a8bac15383" width="700"></p><p align="center"><img src="https://github.com/user-attachments/assets/e60e12ca-4fa4-49f6-a9a0-062af97f446b" width="700"></p><h3 id="integrating-the-power-supply" tabindex="-1">Integrating the power supply <a class="header-anchor" href="#integrating-the-power-supply" aria-label="Permalink to &quot;Integrating the power supply&quot;">​</a></h3><ul><li>Connect your 3.7V lithium batteries to the input side of the power regulation circuit.</li><li>Mount the LM-7809 on the veroboard and add the zener diode plus capacitors around it for filtering and stability.</li><li>Set up two separate power rails on the veroboard: one for 5V (logic, microcontroller, PCA9685) and one for 9V (servomotors).</li><li>Solder red and green LEDs to your rails as power indicators, so you can easily see when each voltage is present.</li></ul><h3 id="wiring-and-soldering" tabindex="-1">Wiring and soldering <a class="header-anchor" href="#wiring-and-soldering" aria-label="Permalink to &quot;Wiring and soldering&quot;">​</a></h3><ul><li>Use a small drill bit or a sharp knife to carefully break copper traces on the veroboard where necessary, preventing unwanted connections.</li><li>Solder wires to link the I2C lines (SDA and SCL) from the ATmega328P to the corresponding pins on the PCA9685.</li><li>Connect each servomotor’s control wire to its dedicated PWM channel on the PCA9685, and hook up their power (to the 9V rail) and ground lines.</li><li>Double-check all connections for accuracy before soldering to ensure everything matches your schematic.</li></ul><p align="center"><img src="https://github.com/user-attachments/assets/a6d4fd28-c999-4ff7-93c3-465c833948e5" width="700"></p><h3 id="mounting-everything-in-the-housing" tabindex="-1">Mounting everything in the housing <a class="header-anchor" href="#mounting-everything-in-the-housing" aria-label="Permalink to &quot;Mounting everything in the housing&quot;">​</a></h3><ul><li>Place the finished veroboard and all connected modules into the housing.</li><li>Secure the servomotors so that each one lines up with the correct segment of the display and can move freely.</li><li>Route the servo wires and any additional connectors to be accessible from outside the housing.</li></ul><p align="center"><img src="https://github.com/user-attachments/assets/4069ba01-519f-4f74-99c8-fc26eac6b152" width="700"></p><h2 id="_7-testing-and-validation" tabindex="-1">7. Testing and Validation <a class="header-anchor" href="#_7-testing-and-validation" aria-label="Permalink to &quot;7. Testing and Validation&quot;">​</a></h2><p>Before uploading the Arduino program, you need to do some final checks:</p><ul><li>Visually inspect and check all connections to prevent short circuits.</li><li>Apply power gradually while monitoring the LEDs and voltage rails.</li></ul><p>After performing these steps, upload <a href="#5-the-arduino-code">The Arduino Code</a>, and observe.</p><h2 id="_8-helpful-ressources" tabindex="-1">8. helpful Ressources <a class="header-anchor" href="#_8-helpful-ressources" aria-label="Permalink to &quot;8. helpful Ressources&quot;">​</a></h2><ul><li><a href="https://www.kicad.org/" target="_blank" rel="noreferrer">Download KiCad</a></li><li><a href="https://www.solidworks.com/sw/support/downloads.htm" target="_blank" rel="noreferrer">Download SolidWorks</a></li><li><a href="https://www.circuits-diy.com/12v-to-9v-converter-circuit-using-lm7809-regulator-ic/" target="_blank" rel="noreferrer">https://www.circuits-diy.com/12v-to-9v-converter-circuit-using-lm7809-regulator-ic/</a></li><li><a href="https://www.ic-components.fr/blog/zener-diode-circuit-design,techniques-and-tips.jsp" target="_blank" rel="noreferrer">https://www.ic-components.fr/blog/zener-diode-circuit-design,techniques-and-tips.jsp</a></li><li><a href="https://fr.hwlibre.com/Guide-complet-du-contr%C3%B4leur-PCA9685-avec-Arduino-et-plus/" target="_blank" rel="noreferrer">https://fr.hwlibre.com/Guide-complet-du-contrôleur-PCA9685-avec-Arduino-et-plus/</a></li><li><a href="https://learn.sparkfun.com/tutorials/hobby-servo-tutorial/all" target="_blank" rel="noreferrer">https://learn.sparkfun.com/tutorials/hobby-servo-tutorial/all</a></li><li><a href="https://www.fs-pcba.com/fr/fabrication-dun-circuit-imprime-etape-par-etape/" target="_blank" rel="noreferrer">https://www.fs-pcba.com/fr/fabrication-dun-circuit-imprime-etape-par-etape/</a></li><li><a href="https://youtu.be/uDUp4cLXFrY?si=2rA-MZsFL_sJVutS" target="_blank" rel="noreferrer">https://youtu.be/uDUp4cLXFrY?si=2rA-MZsFL_sJVutS</a></li><li><a href="https://github.com/sdouze/Atmega-Standalone" target="_blank" rel="noreferrer">https://github.com/sdouze/Atmega-Standalone</a></li><li><a href="https://www.instructables.com/Mastering-Servo-Control-With-PCA9685-and-Arduino/" target="_blank" rel="noreferrer">https://www.instructables.com/Mastering-Servo-Control-With-PCA9685-and-Arduino/</a></li><li><a href="https://learn.sparkfun.com/tutorials/crystal-oscillators/all" target="_blank" rel="noreferrer">https://learn.sparkfun.com/tutorials/crystal-oscillators/all</a></li></ul>`,96)]))}const m=a(t,[["render",r]]);export{h as __pageData,m as default};
